{"ast":null,"code":"var _jsxFileName = \"/home/cmdb-123845/Desktop/graphql-react/client/src/App.js\",\n    _s = $RefreshSig$();\n\n// import logo from './logo.svg';\nimport './App.css';\nimport * as mui from '@mui/material';\nimport React, { useEffect, useState } from 'react';\nimport * as icon from '@mui/icons-material';\nimport { useMutation, useQuery } from '@apollo/client';\nimport { GET_ALL_USERS } from './queries/user';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { ADD_USER, DELETE_USER } from './mutations/user';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst forbiddenSymbolsNumeric = ['KeyE', 'Period', 'Minus', 'Equal'];\n\nfunction App() {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [age, setAge] = useState('');\n  const [users, setUsers] = useState([]);\n  const {\n    data,\n    loading,\n    error\n  } = useQuery(GET_ALL_USERS);\n  const [addUser] = useMutation(ADD_USER);\n  const [deleteUser] = useMutation(DELETE_USER);\n  const [disabled, setDisabled] = useState(false);\n  const [renderUsers, setRenderUsers] = useState(false);\n  const [err, setError] = useState('');\n  useEffect(() => {\n    if (!loading) {\n      setUsers(data.users);\n      setRenderUsers(true);\n    }\n  }, [data]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    if (error) {\n      setError(error.message);\n    }\n  }, [error]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const onAdd = e => {\n    e.preventDefault();\n    setDisabled(true);\n    addUser({\n      variables: {\n        user: {\n          username,\n          age: parseInt(age)\n        }\n      }\n    }).then(_ref => {\n      let {\n        data\n      } = _ref;\n      setUsername('');\n      setAge('');\n      let allUsers = Array.from(users);\n      allUsers.push(data.addUser);\n      setUsers(allUsers);\n    }).catch(err => {\n      console.log(error);\n    }).finally(() => {\n      setDisabled(false);\n    });\n  };\n\n  const onDelete = e => {\n    e.preventDefault();\n    setDisabled(true);\n    deleteUser({\n      variables: {\n        id: e.target.closest('button').dataset.id\n      }\n    }).then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      setUsers(Array.from(users).filter(user => user.id !== data.deleteUser.id));\n    }).catch(err => {\n      console.log(error);\n    }).finally(() => {\n      setDisabled(false);\n    });\n  };\n\n  const onChange = e => {\n    if (e.target.name === 'age') {\n      setAge((() => {\n        if (e.target.value > 150) {\n          return 150;\n        } else {\n          return (value => {\n            const arr = value.split('');\n\n            for (let i = 0; i < arr.length; i++) {\n              if ((isNaN(arr[i - 1]) || arr[i - 1] === '0') && arr[i] === '0' && !isNaN(arr[i + 1])) {\n                arr.splice(i, 1);\n              }\n            }\n\n            return arr.join('');\n          })(e.target.value);\n        }\n      })());\n    } else if (e.target.name === 'username') {\n      setUsername(e.target.value.trim());\n    }\n  };\n\n  const onKeyDown = e => {\n    if (e.target.tagName === 'INPUT' && e.target.type === 'number' && forbiddenSymbolsNumeric.includes(e.code)) {\n      e.preventDefault();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex justify-content-center flex-wrap align-items-center\",\n    children: !err ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(mui.Box, {\n        onSubmit: onAdd,\n        component: \"form\",\n        sx: {\n          width: '100%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          '& .MuiTextField-root': {\n            m: 1,\n            width: '25ch'\n          }\n        },\n        noValidate: true,\n        autoComplete: \"off\",\n        children: [/*#__PURE__*/_jsxDEV(mui.TextField, {\n          name: \"username\",\n          label: \"Name\",\n          variant: \"filled\",\n          onInput: onChange,\n          onChange: onChange,\n          value: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(mui.TextField, {\n          name: \"age\",\n          onKeyDown: onKeyDown,\n          label: \"Age\",\n          variant: \"filled\",\n          type: \"number\",\n          onInput: onChange,\n          onChange: onChange,\n          value: age\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(mui.Button, {\n          disabled: username.length === 0 || age.length === 0 || disabled,\n          type: \"submit\",\n          variant: \"contained\",\n          endIcon: /*#__PURE__*/_jsxDEV(icon.Send, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 145\n          }, this),\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(mui.Box, {\n        component: \"div\",\n        sx: {\n          '& .MuiTextField-root': {\n            m: 1,\n            width: '25ch'\n          }\n        },\n        className: \"d-flex justify-content-start align-items-center flex-wrap\",\n        style: {\n          maxWidth: '100%'\n        },\n        children: !loading && renderUsers ? users.length > 0 ? users.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(mui.CardContent, {\n            style: {\n              padding: 16\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              style: {\n                width: 'fit-content'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between align-items-stretch\",\n                style: {\n                  width: 'fit-content'\n                },\n                children: [/*#__PURE__*/_jsxDEV(mui.Typography, {\n                  className: \"d-flex align-items-end\",\n                  variant: \"h5\",\n                  component: \"div\",\n                  children: user.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(mui.Typography, {\n                  className: \"d-flex align-items-end\",\n                  color: \"text.secondary\",\n                  children: user.age\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(mui.CardActions, {\n                children: /*#__PURE__*/_jsxDEV(mui.IconButton, {\n                  disabled: disabled,\n                  onClick: onDelete,\n                  \"aria-label\": \"delete\",\n                  color: \"error\",\n                  \"data-id\": user.id,\n                  children: /*#__PURE__*/_jsxDEV(icon.Delete, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 41\n          }, this)\n        }, user.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 37\n        }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center align-items-center\",\n          style: {\n            width: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(mui.CardContent, {\n            style: {\n              padding: 16\n            },\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"No users yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center align-items-center\",\n          style: {\n            width: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(mui.CardContent, {\n            style: {\n              padding: 16\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spinner-border\",\n              role: \"status\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"visually-hidden\",\n                children: \"Loading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(mui.Alert, {\n      severity: \"error\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"YgK/64AMgIVDejnlba03kaj0Fao=\", false, function () {\n  return [useQuery, useMutation, useMutation];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/cmdb-123845/Desktop/graphql-react/client/src/App.js"],"names":["mui","React","useEffect","useState","icon","useMutation","useQuery","GET_ALL_USERS","ADD_USER","DELETE_USER","forbiddenSymbolsNumeric","App","username","setUsername","age","setAge","users","setUsers","data","loading","error","addUser","deleteUser","disabled","setDisabled","renderUsers","setRenderUsers","err","setError","message","onAdd","e","preventDefault","variables","user","parseInt","then","allUsers","Array","from","push","catch","console","log","finally","onDelete","id","target","closest","dataset","filter","onChange","name","value","arr","split","i","length","isNaN","splice","join","trim","onKeyDown","tagName","type","includes","code","width","display","alignItems","justifyContent","m","maxWidth","map","padding"],"mappings":"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","sourcesContent":["// import logo from './logo.svg';\nimport './App.css';\nimport * as mui from '@mui/material';\nimport React, { useEffect, useState } from 'react';\nimport * as icon from '@mui/icons-material';\nimport { useMutation, useQuery } from '@apollo/client';\nimport { GET_ALL_USERS } from './queries/user';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { ADD_USER, DELETE_USER } from './mutations/user';\n\nconst forbiddenSymbolsNumeric = ['KeyE', 'Period', 'Minus', 'Equal'];\n\nfunction App() {\n    const [username, setUsername] = useState('');\n    const [age, setAge] = useState('');\n    const [users, setUsers] = useState([]);\n    const { data, loading, error } = useQuery(GET_ALL_USERS);\n    const [addUser] = useMutation(ADD_USER);\n    const [deleteUser] = useMutation(DELETE_USER);\n    const [disabled, setDisabled] = useState(false);\n    const [renderUsers, setRenderUsers] = useState(false);\n    const [err, setError] = useState('');\n    useEffect(() => {\n        if (!loading) {\n            setUsers(data.users);\n            setRenderUsers(true);\n        }\n    }, [data]); // eslint-disable-line react-hooks/exhaustive-deps\n    useEffect(() => {\n        if (error) {\n            setError(error.message);\n        }\n    }, [error]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    const onAdd = (e) => {\n        e.preventDefault();\n        setDisabled(true);\n        addUser({\n            variables: {\n                user: {\n                    username,\n                    age: parseInt(age),\n                },\n            },\n        })\n            .then(({ data }) => {\n                setUsername('');\n                setAge('');\n                let allUsers = Array.from(users);\n                allUsers.push(data.addUser);\n                setUsers(allUsers);\n            })\n            .catch((err) => {\n                console.log(error);\n            })\n            .finally(() => {\n                setDisabled(false);\n            });\n    };\n\n    const onDelete = (e) => {\n        e.preventDefault();\n        setDisabled(true);\n\n        deleteUser({\n            variables: {\n                id: e.target.closest('button').dataset.id,\n            },\n        })\n            .then(({ data }) => {\n                setUsers(Array.from(users).filter((user) => user.id !== data.deleteUser.id));\n            })\n            .catch((err) => {\n                console.log(error);\n            })\n            .finally(() => {\n                setDisabled(false);\n            });\n    };\n\n    const onChange = (e) => {\n        if (e.target.name === 'age') {\n            setAge(\n                (() => {\n                    if (e.target.value > 150) {\n                        return 150;\n                    } else {\n                        return ((value) => {\n                            const arr = value.split('');\n                            for (let i = 0; i < arr.length; i++) {\n                                if ((isNaN(arr[i - 1]) || arr[i - 1] === '0') && arr[i] === '0' && !isNaN(arr[i + 1])) {\n                                    arr.splice(i, 1);\n                                }\n                            }\n\n                            return arr.join('');\n                        })(e.target.value);\n                    }\n                })()\n            );\n        } else if (e.target.name === 'username') {\n            setUsername(e.target.value.trim());\n        }\n    };\n    const onKeyDown = (e) => {\n        if (e.target.tagName === 'INPUT' && e.target.type === 'number' && forbiddenSymbolsNumeric.includes(e.code)) {\n            e.preventDefault();\n        }\n    };\n\n    return (\n        <div className=\"d-flex justify-content-center flex-wrap align-items-center\">\n            {!err ? (\n                <>\n                    {/* {(() => {\n                debugger;\n            })()} */}\n                    <mui.Box\n                        onSubmit={onAdd}\n                        component=\"form\"\n                        sx={{\n                            width: '100%',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            '& .MuiTextField-root': { m: 1, width: '25ch' },\n                        }}\n                        noValidate\n                        autoComplete=\"off\"\n                    >\n                        <mui.TextField name=\"username\" label=\"Name\" variant=\"filled\" onInput={onChange} onChange={onChange} value={username} />\n                        <mui.TextField name=\"age\" onKeyDown={onKeyDown} label=\"Age\" variant=\"filled\" type=\"number\" onInput={onChange} onChange={onChange} value={age} />\n                        <mui.Button disabled={username.length === 0 || age.length === 0 || disabled} type=\"submit\" variant=\"contained\" endIcon={<icon.Send />}>\n                            Send\n                        </mui.Button>\n                    </mui.Box>\n                    <mui.Box\n                        component=\"div\"\n                        sx={{\n                            '& .MuiTextField-root': { m: 1, width: '25ch' },\n                        }}\n                        className=\"d-flex justify-content-start align-items-center flex-wrap\"\n                        style={{ maxWidth: '100%' }}\n                    >\n                        {!loading && renderUsers ? (\n                            users.length > 0 ? (\n                                users.map((user) => (\n                                    <div key={user.id}>\n                                        <mui.CardContent style={{ padding: 16 }}>\n                                            <div className=\"d-flex justify-content-between align-items-center\" style={{ width: 'fit-content' }}>\n                                                <div className=\"d-flex justify-content-between align-items-stretch\" style={{ width: 'fit-content' }}>\n                                                    <mui.Typography className=\"d-flex align-items-end\" variant=\"h5\" component=\"div\">\n                                                        {user.username}\n                                                    </mui.Typography>\n                                                    <mui.Typography className=\"d-flex align-items-end\" color=\"text.secondary\">\n                                                        {user.age}\n                                                    </mui.Typography>\n                                                </div>\n                                                <mui.CardActions>\n                                                    <mui.IconButton disabled={disabled} onClick={onDelete} aria-label=\"delete\" color=\"error\" data-id={user.id}>\n                                                        <icon.Delete />\n                                                    </mui.IconButton>\n                                                </mui.CardActions>\n                                            </div>\n                                        </mui.CardContent>\n                                    </div>\n                                ))\n                            ) : (\n                                <div className=\"d-flex justify-content-center align-items-center\" style={{ width: '100%' }}>\n                                    <mui.CardContent style={{ padding: 16 }}>\n                                        <span>No users yet</span>\n                                    </mui.CardContent>\n                                </div>\n                            )\n                        ) : (\n                            <div className=\"d-flex justify-content-center align-items-center\" style={{ width: '100%' }}>\n                                <mui.CardContent style={{ padding: 16 }}>\n                                    <div className=\"spinner-border\" role=\"status\">\n                                        <span className=\"visually-hidden\">Loading...</span>\n                                    </div>\n                                </mui.CardContent>\n                            </div>\n                        )}\n                    </mui.Box>\n                </>\n            ) : (\n                <mui.Alert severity=\"error\">{err}</mui.Alert>\n            )}\n        </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}