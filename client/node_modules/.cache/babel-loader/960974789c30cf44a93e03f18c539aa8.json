{"ast":null,"code":"var _jsxFileName = \"/home/cmdb-123845/Desktop/graphql-react/client/src/App.js\",\n    _s = $RefreshSig$();\n\n// import logo from './logo.svg';\nimport './App.css';\nimport * as mui from '@mui/material';\nimport React, { useEffect, useState } from 'react';\nimport * as icon from '@mui/icons-material';\nimport { useMutation, useQuery } from '@apollo/client';\nimport { GET_ALL_USERS } from './queries/user';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { ADD_USER, DELETE_USER } from './mutations/user';\nimport { ADD_TODO, DELETE_TODO, DO_TODO, UNDO_TODO } from './mutations/todo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst forbiddenSymbolsNumeric = ['KeyE', 'Period', 'Minus', 'Equal'];\n\nconst App = () => {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [age, setAge] = useState('');\n  const [users, setUsers] = useState([]);\n  const {\n    data,\n    loading,\n    error,\n    refetch\n  } = useQuery(GET_ALL_USERS);\n  const [addUser] = useMutation(ADD_USER);\n  const [deleteUser] = useMutation(DELETE_USER);\n  const [addTodo] = useMutation(ADD_TODO);\n  const [deleteTodo] = useMutation(DELETE_TODO);\n  const [doTodo] = useMutation(DO_TODO);\n  const [undoTodo] = useMutation(UNDO_TODO);\n  const [disabled, setDisabled] = useState(false);\n  const [renderUsers, setRenderUsers] = useState(false);\n  const [errLoad, setErrLoad] = useState('');\n  const [refreshDisabled, setRefreshDisabled] = useState(false);\n  const [actionError, setActionError] = useState('');\n  const [open, setOpen] = useState(false);\n  const [nameInput, setNameInput] = useState(null);\n  const [editTodoText, setEditTodoText] = useState({\n    id: -1,\n    text: '',\n    done: false,\n    userId: -1\n  });\n  const [todosInfo, setTodosInfo] = useState([]);\n  useEffect(() => {\n    if (!loading) {\n      setErrLoad('');\n      setUsers(data.users);\n      setRenderUsers(true);\n    }\n  }, [data]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    if (error) {\n      setErrLoad(error.message);\n    }\n  }, [error]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const onAddTodo = (e, userId) => {\n    e.preventDefault();\n    setDisabled(true);\n    addTodo({\n      variables: {\n        todo: {\n          text: '',\n          userId\n        }\n      }\n    }).then(_ref => {\n      let {\n        data\n      } = _ref;\n      setUsers(Array.from(users).map(user => {\n        if (user.id === userId) {\n          const todos = Array.from(user.todos);\n          todos.push(data.addTodo);\n          return { ...user,\n            ...{\n              todos: todos\n            }\n          };\n        } else {\n          return user;\n        }\n      }));\n    }).catch(err => {\n      setActionError(err.message);\n      setOpen(true);\n    }).finally(() => {\n      setDisabled(false);\n    });\n  };\n\n  const onDeleteTodo = (e, todoId) => {\n    e.preventDefault();\n    setDisabled(true);\n    deleteTodo({\n      variables: {\n        id: todoId\n      }\n    }).then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      setUsers(Array.from(users).map(user => ({ ...user,\n        ...{\n          todos: Array.from(user.todos).filter(todo => todo.id !== data.deleteTodo.id)\n        }\n      })));\n    }).catch(err => {\n      setActionError(err.message);\n      setOpen(true);\n    }).finally(() => {\n      setDisabled(false);\n    });\n  };\n\n  const onDoUndoTodo = (e, t) => {\n    e.preventDefault();\n    setDisabled(true);\n\n    if (t.done) {\n      undoTodo({\n        variables: {\n          id: t.id\n        }\n      }).then(_ref3 => {\n        let {\n          data\n        } = _ref3;\n        setUsers(Array.from(users).map(user => {\n          const todos = Array.from(user.todos).map(todo => {\n            if (todo.id === t.id) {\n              return { ...todo,\n                ...{\n                  done: false\n                }\n              };\n            }\n\n            return todo;\n          });\n          return { ...user,\n            ...{\n              todos\n            }\n          };\n        }));\n      }).catch(err => {\n        setActionError(err.message);\n        setOpen(true);\n      }).finally(() => {\n        setDisabled(false);\n      });\n    } else {\n      doTodo({\n        variables: {\n          id: t.id\n        }\n      }).then(_ref4 => {\n        let {\n          data\n        } = _ref4;\n        setUsers(Array.from(users).map(user => {\n          const todos = Array.from(user.todos).map(todo => {\n            if (todo.id === t.id) {\n              return { ...todo,\n                ...{\n                  done: true\n                }\n              };\n            }\n\n            return todo;\n          });\n          return { ...user,\n            ...{\n              todos\n            }\n          };\n        }));\n      }).catch(err => {\n        setActionError(err.message);\n        setOpen(true);\n      }).finally(() => {\n        setDisabled(false);\n      });\n    }\n  };\n\n  const startEditTodoText = (e, todo) => {\n    if (editTodoText.id === -1 || editTodoText.id !== todo.id) {\n      setEditTodoText(todo);\n    } else {\n      setEditTodoText({\n        id: -1,\n        text: '',\n        done: false,\n        userId: -1\n      });\n    }\n  };\n\n  const onAddUser = e => {\n    e.preventDefault();\n    setDisabled(true);\n    addUser({\n      variables: {\n        user: {\n          username,\n          age: parseInt(age)\n        }\n      }\n    }).then(_ref5 => {\n      let {\n        data\n      } = _ref5;\n      setUsername('');\n      setAge('');\n      const allUsers = Array.from(users);\n      allUsers.push(data.addUser);\n      setUsers(allUsers);\n      nameInput.focus();\n    }).catch(err => {\n      setActionError(err.message);\n      setOpen(true);\n    }).finally(() => {\n      setDisabled(false);\n    });\n  };\n\n  const onDeleteUser = (e, userId) => {\n    e.preventDefault();\n    setDisabled(true);\n    deleteUser({\n      variables: {\n        id: userId\n      }\n    }).then(_ref6 => {\n      let {\n        data\n      } = _ref6;\n      setUsers(Array.from(users).filter(user => user.id !== data.deleteUser.id));\n    }).catch(err => {\n      setActionError(err.message);\n      setOpen(true);\n    }).finally(() => {\n      setDisabled(false);\n    });\n  };\n\n  const onChange = e => {\n    if (e.target.name === 'age') {\n      setAge((() => {\n        if (e.target.value > 150) {\n          return 150;\n        } else {\n          return (value => {\n            const arr = value.split('');\n\n            for (let i = 0; i < arr.length; i++) {\n              if ((isNaN(arr[i - 1]) || arr[i - 1] === '0') && arr[i] === '0' && !isNaN(arr[i + 1])) {\n                arr.splice(i, 1);\n              }\n            }\n\n            return arr.join('');\n          })(e.target.value);\n        }\n      })());\n    } else if (e.target.name === 'username') {\n      setUsername(e.target.value.trim());\n    }\n  };\n\n  const onKeyDown = e => {\n    if (e.target.tagName === 'INPUT' && e.target.type === 'number' && forbiddenSymbolsNumeric.includes(e.code)) {\n      e.preventDefault();\n    }\n  };\n\n  const reload = e => {\n    e.preventDefault();\n    setRefreshDisabled(true);\n    refetch().catch(err => {}).finally(() => {\n      setRefreshDisabled(false);\n    });\n  };\n\n  const toastClose = e => {\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex justify-content-center flex-wrap align-items-center\",\n    children: !errLoad ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(mui.Box, {\n        onSubmit: onAddUser,\n        component: \"form\",\n        sx: {\n          width: '100%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          '& .MuiTextField-root': {\n            m: 1,\n            width: '25ch'\n          }\n        },\n        noValidate: true,\n        autoComplete: \"off\",\n        children: [/*#__PURE__*/_jsxDEV(mui.TextField, {\n          inputRef: input => {\n            setNameInput(input);\n          },\n          name: \"username\",\n          label: \"Name\",\n          variant: \"filled\",\n          onInput: onChange,\n          onChange: onChange,\n          value: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(mui.TextField, {\n          name: \"age\",\n          onKeyDown: onKeyDown,\n          label: \"Age\",\n          variant: \"filled\",\n          type: \"number\",\n          onInput: onChange,\n          onChange: onChange,\n          value: age\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(mui.Button, {\n          \"aria-label\": \"add user\",\n          disabled: username.length === 0 || age.length === 0 || disabled,\n          type: \"submit\",\n          variant: \"contained\",\n          endIcon: /*#__PURE__*/_jsxDEV(icon.Add, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 167\n          }, this),\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(mui.Snackbar, {\n          open: open,\n          autoHideDuration: 6000,\n          onClose: toastClose,\n          children: /*#__PURE__*/_jsxDEV(mui.Alert, {\n            onClose: toastClose,\n            severity: \"error\",\n            sx: {\n              width: '100%'\n            },\n            children: actionError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(mui.Box, {\n        component: \"div\",\n        sx: {\n          '& .MuiTextField-root': {\n            m: 1,\n            width: '25ch'\n          }\n        },\n        className: \"d-flex justify-content-start align-items-start flex-wrap user-cards\",\n        children: !loading && renderUsers ? users.length > 0 ? users.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-card\",\n          children: /*#__PURE__*/_jsxDEV(mui.Paper, {\n            elevation: 4,\n            children: /*#__PURE__*/_jsxDEV(mui.CardContent, {\n              style: {\n                position: 'relative',\n                padding: 16\n              },\n              children: [/*#__PURE__*/_jsxDEV(mui.IconButton, {\n                disabled: disabled,\n                onClick: e => {\n                  onDeleteUser(e, user.id);\n                },\n                \"aria-label\": \"delete user\",\n                color: \"error\",\n                style: {\n                  position: 'absolute',\n                  right: 0,\n                  top: 0\n                },\n                children: /*#__PURE__*/_jsxDEV(icon.Delete, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(mui.Typography, {\n                className: \"d-flex align-items-end mt-4\",\n                variant: \"h6\",\n                component: \"div\",\n                children: [\"Name: \", user.username]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(mui.Typography, {\n                sx: {\n                  fontSize: 14\n                },\n                color: \"text.secondary\",\n                gutterBottom: true,\n                children: [\"age: \", user.age]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(mui.Typography, {\n                sx: {\n                  mt: 4,\n                  mb: 2\n                },\n                variant: \"h4\",\n                component: \"div\",\n                children: [\"Todos\", /*#__PURE__*/_jsxDEV(mui.IconButton, {\n                  onClick: e => {\n                    onAddTodo(e, user.id);\n                  },\n                  \"aria-label\": \"add todo\",\n                  disabled: disabled,\n                  color: \"success\",\n                  children: /*#__PURE__*/_jsxDEV(icon.Add, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 49\n              }, this), user.todos.length > 0 ? /*#__PURE__*/_jsxDEV(mui.List, {\n                className: \"mb-4\",\n                children: user.todos.map(todo => /*#__PURE__*/_jsxDEV(mui.ListItem, {\n                  className: \"px-3\",\n                  secondaryAction: /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(mui.IconButton, {\n                      onClick: e => {\n                        startEditTodoText(e, todo);\n                      },\n                      disabled: disabled,\n                      color: \"primary\",\n                      edge: \"end\",\n                      \"aria-label\": \"edit todo\",\n                      children: todo.id === editTodoText.id ? /*#__PURE__*/_jsxDEV(icon.Done, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 367,\n                        columnNumber: 108\n                      }, this) : /*#__PURE__*/_jsxDEV(icon.Edit, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 367,\n                        columnNumber: 124\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 358,\n                      columnNumber: 73\n                    }, this), /*#__PURE__*/_jsxDEV(mui.IconButton, {\n                      onClick: e => {\n                        onDeleteTodo(e, todo.id);\n                      },\n                      disabled: disabled,\n                      edge: \"end\",\n                      \"aria-label\": \"delete todo\",\n                      children: /*#__PURE__*/_jsxDEV(icon.Delete, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 377,\n                        columnNumber: 77\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 369,\n                      columnNumber: 73\n                    }, this)]\n                  }, void 0, true),\n                  disablePadding: true,\n                  children: [/*#__PURE__*/_jsxDEV(mui.ListItemIcon, {\n                    style: {\n                      minWidth: 'unset'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(mui.Checkbox, {\n                      edge: \"start\",\n                      disabled: disabled,\n                      onChange: e => {\n                        onDoUndoTodo(e, todo);\n                      },\n                      checked: todo.done,\n                      tabIndex: -1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 384,\n                      columnNumber: 69\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 65\n                  }, this), /*#__PURE__*/_jsxDEV(mui.TextField, {\n                    multiline: true,\n                    className: \"todo-text\",\n                    style: {\n                      width: 'calc(100% - 86px)'\n                    },\n                    disabled: todo.id !== editTodoText.id,\n                    variant: \"standard\",\n                    value: todo.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 394,\n                    columnNumber: 65\n                  }, this)]\n                }, todo.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 61\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 53\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-5 mt-3\",\n                children: \"No todos yet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 41\n          }, this)\n        }, user.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 37\n        }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center align-items-center\",\n          style: {\n            width: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(mui.CardContent, {\n            style: {\n              padding: 16\n            },\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"No users yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center align-items-center\",\n          style: {\n            width: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(mui.CardContent, {\n            style: {\n              padding: 16\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spinner-border\",\n              role: \"status\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"visually-hidden\",\n                children: \"Loading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(mui.Alert, {\n      severity: \"error\",\n      action: /*#__PURE__*/_jsxDEV(mui.Button, {\n        disabled: refreshDisabled,\n        onClick: reload,\n        color: \"inherit\",\n        size: \"small\",\n        children: \"Refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 25\n      }, this),\n      children: errLoad\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 266,\n    columnNumber: 9\n  }, this);\n};\n\n_s(App, \"50eK/7Cvp56LJXE8unF7yYx+GsE=\", false, function () {\n  return [useQuery, useMutation, useMutation, useMutation, useMutation, useMutation, useMutation];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/cmdb-123845/Desktop/graphql-react/client/src/App.js"],"names":["mui","React","useEffect","useState","icon","useMutation","useQuery","GET_ALL_USERS","ADD_USER","DELETE_USER","ADD_TODO","DELETE_TODO","DO_TODO","UNDO_TODO","forbiddenSymbolsNumeric","App","username","setUsername","age","setAge","users","setUsers","data","loading","error","refetch","addUser","deleteUser","addTodo","deleteTodo","doTodo","undoTodo","disabled","setDisabled","renderUsers","setRenderUsers","errLoad","setErrLoad","refreshDisabled","setRefreshDisabled","actionError","setActionError","open","setOpen","nameInput","setNameInput","editTodoText","setEditTodoText","id","text","done","userId","todosInfo","setTodosInfo","message","onAddTodo","e","preventDefault","variables","todo","then","Array","from","map","user","todos","push","catch","err","finally","onDeleteTodo","todoId","filter","onDoUndoTodo","t","startEditTodoText","onAddUser","parseInt","allUsers","focus","onDeleteUser","onChange","target","name","value","arr","split","i","length","isNaN","splice","join","trim","onKeyDown","tagName","type","includes","code","reload","toastClose","width","display","alignItems","justifyContent","m","input","position","padding","right","top","fontSize","mt","mb","minWidth"],"mappings":"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","sourcesContent":["// import logo from './logo.svg';\nimport './App.css';\nimport * as mui from '@mui/material';\nimport React, { useEffect, useState } from 'react';\nimport * as icon from '@mui/icons-material';\nimport { useMutation, useQuery } from '@apollo/client';\nimport { GET_ALL_USERS } from './queries/user';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { ADD_USER, DELETE_USER } from './mutations/user';\nimport { ADD_TODO, DELETE_TODO, DO_TODO, UNDO_TODO } from './mutations/todo';\n\nconst forbiddenSymbolsNumeric = ['KeyE', 'Period', 'Minus', 'Equal'];\n\nconst App = () => {\n    const [username, setUsername] = useState('');\n    const [age, setAge] = useState('');\n    const [users, setUsers] = useState([]);\n\n    const { data, loading, error, refetch } = useQuery(GET_ALL_USERS);\n    const [addUser] = useMutation(ADD_USER);\n    const [deleteUser] = useMutation(DELETE_USER);\n    const [addTodo] = useMutation(ADD_TODO);\n    const [deleteTodo] = useMutation(DELETE_TODO);\n    const [doTodo] = useMutation(DO_TODO);\n    const [undoTodo] = useMutation(UNDO_TODO);\n\n    const [disabled, setDisabled] = useState(false);\n    const [renderUsers, setRenderUsers] = useState(false);\n    const [errLoad, setErrLoad] = useState('');\n    const [refreshDisabled, setRefreshDisabled] = useState(false);\n    const [actionError, setActionError] = useState('');\n    const [open, setOpen] = useState(false);\n    const [nameInput, setNameInput] = useState(null);\n    const [editTodoText, setEditTodoText] = useState({ id: -1, text: '', done: false, userId: -1 });\n    const [todosInfo, setTodosInfo] = useState([]);\n\n    useEffect(() => {\n        if (!loading) {\n            setErrLoad('');\n            setUsers(data.users);\n            setRenderUsers(true);\n        }\n    }, [data]); // eslint-disable-line react-hooks/exhaustive-deps\n    useEffect(() => {\n        if (error) {\n            setErrLoad(error.message);\n        }\n    }, [error]); // eslint-disable-line react-hooks/exhaustive-deps\n    const onAddTodo = (e, userId) => {\n        e.preventDefault();\n        setDisabled(true);\n        addTodo({\n            variables: {\n                todo: {\n                    text: '',\n                    userId,\n                },\n            },\n        })\n            .then(({ data }) => {\n                setUsers(\n                    Array.from(users).map((user) => {\n                        if (user.id === userId) {\n                            const todos = Array.from(user.todos);\n                            todos.push(data.addTodo);\n                            return { ...user, ...{ todos: todos } };\n                        } else {\n                            return user;\n                        }\n                    })\n                );\n            })\n            .catch((err) => {\n                setActionError(err.message);\n                setOpen(true);\n            })\n            .finally(() => {\n                setDisabled(false);\n            });\n    };\n\n    const onDeleteTodo = (e, todoId) => {\n        e.preventDefault();\n        setDisabled(true);\n        deleteTodo({\n            variables: {\n                id: todoId,\n            },\n        })\n            .then(({ data }) => {\n                setUsers(Array.from(users).map((user) => ({ ...user, ...{ todos: Array.from(user.todos).filter((todo) => todo.id !== data.deleteTodo.id) } })));\n            })\n            .catch((err) => {\n                setActionError(err.message);\n                setOpen(true);\n            })\n            .finally(() => {\n                setDisabled(false);\n            });\n    };\n\n    const onDoUndoTodo = (e, t) => {\n        e.preventDefault();\n        setDisabled(true);\n\n        if (t.done) {\n            undoTodo({\n                variables: {\n                    id: t.id,\n                },\n            })\n                .then(({ data }) => {\n                    setUsers(\n                        Array.from(users).map((user) => {\n                            const todos = Array.from(user.todos).map((todo) => {\n                                if (todo.id === t.id) {\n                                    return { ...todo, ...{ done: false } };\n                                }\n\n                                return todo;\n                            });\n\n                            return { ...user, ...{ todos } };\n                        })\n                    );\n                })\n                .catch((err) => {\n                    setActionError(err.message);\n                    setOpen(true);\n                })\n                .finally(() => {\n                    setDisabled(false);\n                });\n        } else {\n            doTodo({\n                variables: {\n                    id: t.id,\n                },\n            })\n                .then(({ data }) => {\n                    setUsers(\n                        Array.from(users).map((user) => {\n                            const todos = Array.from(user.todos).map((todo) => {\n                                if (todo.id === t.id) {\n                                    return { ...todo, ...{ done: true } };\n                                }\n\n                                return todo;\n                            });\n\n                            return { ...user, ...{ todos } };\n                        })\n                    );\n                })\n                .catch((err) => {\n                    setActionError(err.message);\n                    setOpen(true);\n                })\n                .finally(() => {\n                    setDisabled(false);\n                });\n        }\n    };\n\n    const startEditTodoText = (e, todo) => {\n        if (editTodoText.id === -1 || editTodoText.id !== todo.id) {\n            setEditTodoText(todo);\n        } else {\n            setEditTodoText({ id: -1, text: '', done: false, userId: -1 });\n        }\n    };\n\n    const onAddUser = (e) => {\n        e.preventDefault();\n        setDisabled(true);\n        addUser({\n            variables: {\n                user: {\n                    username,\n                    age: parseInt(age),\n                },\n            },\n        })\n            .then(({ data }) => {\n                setUsername('');\n                setAge('');\n                const allUsers = Array.from(users);\n                allUsers.push(data.addUser);\n                setUsers(allUsers);\n                nameInput.focus();\n            })\n            .catch((err) => {\n                setActionError(err.message);\n                setOpen(true);\n            })\n            .finally(() => {\n                setDisabled(false);\n            });\n    };\n\n    const onDeleteUser = (e, userId) => {\n        e.preventDefault();\n        setDisabled(true);\n        deleteUser({\n            variables: {\n                id: userId,\n            },\n        })\n            .then(({ data }) => {\n                setUsers(Array.from(users).filter((user) => user.id !== data.deleteUser.id));\n            })\n            .catch((err) => {\n                setActionError(err.message);\n                setOpen(true);\n            })\n            .finally(() => {\n                setDisabled(false);\n            });\n    };\n\n    const onChange = (e) => {\n        if (e.target.name === 'age') {\n            setAge(\n                (() => {\n                    if (e.target.value > 150) {\n                        return 150;\n                    } else {\n                        return ((value) => {\n                            const arr = value.split('');\n                            for (let i = 0; i < arr.length; i++) {\n                                if ((isNaN(arr[i - 1]) || arr[i - 1] === '0') && arr[i] === '0' && !isNaN(arr[i + 1])) {\n                                    arr.splice(i, 1);\n                                }\n                            }\n\n                            return arr.join('');\n                        })(e.target.value);\n                    }\n                })()\n            );\n        } else if (e.target.name === 'username') {\n            setUsername(e.target.value.trim());\n        }\n    };\n    const onKeyDown = (e) => {\n        if (e.target.tagName === 'INPUT' && e.target.type === 'number' && forbiddenSymbolsNumeric.includes(e.code)) {\n            e.preventDefault();\n        }\n    };\n\n    const reload = (e) => {\n        e.preventDefault();\n        setRefreshDisabled(true);\n        refetch()\n            .catch((err) => {})\n            .finally(() => {\n                setRefreshDisabled(false);\n            });\n    };\n\n    const toastClose = (e) => {\n        setOpen(false);\n    };\n\n    return (\n        <div className=\"d-flex justify-content-center flex-wrap align-items-center\">\n            {!errLoad ? (\n                <>\n                    {/* {(() => {\n                debugger;\n            })()} */}\n                    <mui.Box\n                        onSubmit={onAddUser}\n                        component=\"form\"\n                        sx={{\n                            width: '100%',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            '& .MuiTextField-root': { m: 1, width: '25ch' },\n                        }}\n                        noValidate\n                        autoComplete=\"off\"\n                    >\n                        <mui.TextField\n                            inputRef={(input) => {\n                                setNameInput(input);\n                            }}\n                            name=\"username\"\n                            label=\"Name\"\n                            variant=\"filled\"\n                            onInput={onChange}\n                            onChange={onChange}\n                            value={username}\n                        />\n                        <mui.TextField name=\"age\" onKeyDown={onKeyDown} label=\"Age\" variant=\"filled\" type=\"number\" onInput={onChange} onChange={onChange} value={age} />\n                        <mui.Button aria-label=\"add user\" disabled={username.length === 0 || age.length === 0 || disabled} type=\"submit\" variant=\"contained\" endIcon={<icon.Add />}>\n                            Add\n                        </mui.Button>\n                        <mui.Snackbar open={open} autoHideDuration={6000} onClose={toastClose}>\n                            <mui.Alert onClose={toastClose} severity=\"error\" sx={{ width: '100%' }}>\n                                {actionError}\n                            </mui.Alert>\n                        </mui.Snackbar>\n                    </mui.Box>\n                    <mui.Box\n                        component=\"div\"\n                        sx={{\n                            '& .MuiTextField-root': { m: 1, width: '25ch' },\n                        }}\n                        className=\"d-flex justify-content-start align-items-start flex-wrap user-cards\"\n                    >\n                        {!loading && renderUsers ? (\n                            users.length > 0 ? (\n                                users.map((user) => (\n                                    <div key={user.id} className=\"user-card\">\n                                        <mui.Paper elevation={4}>\n                                            <mui.CardContent style={{ position: 'relative', padding: 16 }}>\n                                                <mui.IconButton\n                                                    disabled={disabled}\n                                                    onClick={(e) => {\n                                                        onDeleteUser(e, user.id);\n                                                    }}\n                                                    aria-label=\"delete user\"\n                                                    color=\"error\"\n                                                    style={{ position: 'absolute', right: 0, top: 0 }}\n                                                >\n                                                    <icon.Delete />\n                                                </mui.IconButton>\n                                                <mui.Typography className=\"d-flex align-items-end mt-4\" variant=\"h6\" component=\"div\">\n                                                    Name: {user.username}\n                                                </mui.Typography>\n                                                <mui.Typography sx={{ fontSize: 14 }} color=\"text.secondary\" gutterBottom>\n                                                    age: {user.age}\n                                                </mui.Typography>\n\n                                                <mui.Typography sx={{ mt: 4, mb: 2 }} variant=\"h4\" component=\"div\">\n                                                    Todos\n                                                    <mui.IconButton\n                                                        onClick={(e) => {\n                                                            onAddTodo(e, user.id);\n                                                        }}\n                                                        aria-label=\"add todo\"\n                                                        disabled={disabled}\n                                                        color=\"success\"\n                                                    >\n                                                        <icon.Add></icon.Add>\n                                                    </mui.IconButton>\n                                                </mui.Typography>\n                                                {user.todos.length > 0 ? (\n                                                    <mui.List className=\"mb-4\">\n                                                        {user.todos.map((todo) => (\n                                                            <mui.ListItem\n                                                                className=\"px-3\"\n                                                                key={todo.id}\n                                                                secondaryAction={\n                                                                    <>\n                                                                        <mui.IconButton\n                                                                            onClick={(e) => {\n                                                                                startEditTodoText(e, todo);\n                                                                            }}\n                                                                            disabled={disabled}\n                                                                            color=\"primary\"\n                                                                            edge=\"end\"\n                                                                            aria-label=\"edit todo\"\n                                                                        >\n                                                                            {todo.id === editTodoText.id ? <icon.Done /> : <icon.Edit />}\n                                                                        </mui.IconButton>\n                                                                        <mui.IconButton\n                                                                            onClick={(e) => {\n                                                                                onDeleteTodo(e, todo.id);\n                                                                            }}\n                                                                            disabled={disabled}\n                                                                            edge=\"end\"\n                                                                            aria-label=\"delete todo\"\n                                                                        >\n                                                                            <icon.Delete />\n                                                                        </mui.IconButton>\n                                                                    </>\n                                                                }\n                                                                disablePadding\n                                                            >\n                                                                <mui.ListItemIcon style={{ minWidth: 'unset' }}>\n                                                                    <mui.Checkbox\n                                                                        edge=\"start\"\n                                                                        disabled={disabled}\n                                                                        onChange={(e) => {\n                                                                            onDoUndoTodo(e, todo);\n                                                                        }}\n                                                                        checked={todo.done}\n                                                                        tabIndex={-1}\n                                                                    />\n                                                                </mui.ListItemIcon>\n                                                                <mui.TextField multiline className=\"todo-text\" style={{ width: 'calc(100% - 86px)' }} disabled={todo.id !== editTodoText.id} variant=\"standard\" value={todo.text} />\n\n                                                                {/* <mui.ListItemButton disableRipple dense style={{ cursor: 'default', paddingRight: 90, width: '100%' }}> */}\n                                                                {/* <mui.ListItemText primary={} /> */}\n                                                                {/* </mui.ListItemButton> */}\n                                                            </mui.ListItem>\n                                                        ))}\n                                                    </mui.List>\n                                                ) : (\n                                                    <div className=\"mb-5 mt-3\">No todos yet</div>\n                                                )}\n                                            </mui.CardContent>\n                                        </mui.Paper>\n                                    </div>\n                                ))\n                            ) : (\n                                <div className=\"d-flex justify-content-center align-items-center\" style={{ width: '100%' }}>\n                                    <mui.CardContent style={{ padding: 16 }}>\n                                        <span>No users yet</span>\n                                    </mui.CardContent>\n                                </div>\n                            )\n                        ) : (\n                            <div className=\"d-flex justify-content-center align-items-center\" style={{ width: '100%' }}>\n                                <mui.CardContent style={{ padding: 16 }}>\n                                    <div className=\"spinner-border\" role=\"status\">\n                                        <span className=\"visually-hidden\">Loading...</span>\n                                    </div>\n                                </mui.CardContent>\n                            </div>\n                        )}\n                    </mui.Box>\n                </>\n            ) : (\n                <mui.Alert\n                    severity=\"error\"\n                    action={\n                        <mui.Button disabled={refreshDisabled} onClick={reload} color=\"inherit\" size=\"small\">\n                            Refresh\n                        </mui.Button>\n                    }\n                >\n                    {errLoad}\n                </mui.Alert>\n            )}\n        </div>\n    );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}